name: Test E2E Android

on: [pull_request]

jobs:
  build-debug-android:
    uses: ./.github/workflows/build-debug-android.yml
  test-e2e-android:
    runs-on: ubuntu-latest
    needs: [build-debug-android]
    steps:
      - uses: actions/download-artifact@v4
        with:
          name: android-debug.apk
          path: artifacts
      - name: Display structure of downloaded files
        run: ls -R artifacts
      - name: Run Detox
        run: yarn start & yarn detox:test:android